<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script type="text/javascript" src="../chapter07/01-Dictionaries.js"></script>
<!-- <script type="text/javascript" src="../chapter07/02-UsingDictionaries.js"></script> -->
<script type="text/javascript" src="../chapter04/01-Queue.js"></script>


<script>


var Graph = function(){
  var vertices = [];
  var adjList = new Dictionary();

  this.addVertex = function(v){
    vertices.push(v);
    adjList.set(v,[]);
  };

  this.addEdge = function(v,w){
    adjList.get(v).push(w);
    adjList.get(w).push(v);
  }

//Print out graph
  this.toString = function(){
    var s = '';
    for (var i=0; i<vertices.length; i++){
      s += vertices[i] + ' -> ';
      var neighbors = adjList.get(vertices[i]);

      for (var j=0; j<neighbors.length; j++){
        s += neighbors[j] + ' ';
      }
      s += '\n'; //{13}
    }
    return s;
    };

//BFS - Breadth First Search
  var initializeColor = function(){
    var color = [];
    for (var i=0; i<vertices.length; i++){
      color[vertices[i]] = 'white';
    }
    return color;
  };

  this.bfs = function(v, callback){
    var color = initializeColor();
    queue = new Queue();
    queue.enqueue(v);

    while (!queue.isEmpty()){
      var u = queue.dequeue();
      console.log("exploring node", u)
      neighbors = adjList.get(u);
      color[u] = 'grey';
      for (var i=0; i<neighbors.length; i++){
        var w = neighbors[i];
        if (color[w] === 'white'){
          color[w] = 'grey';
          queue.enqueue(w); //{13}
        }
      }
      console.log("current queue")
      queue.print()
      color[u] = 'black'; //{14}
      if (callback) { //{15}
        callback(u);
      }
    } // End internal while loop
  }; // End this.bfs

}  // End Graph

//Test Graph Code

  //Create Graph
    var graph = new Graph();
    var myVertices = ['A','B','C','D','E','F','G','H','I']; //{7}
    for (var i=0; i<myVertices.length; i++){
    graph.addVertex(myVertices[i]);
    }
    graph.addEdge('A', 'B');
    graph.addEdge('A', 'C');
    graph.addEdge('A', 'D');
    graph.addEdge('C', 'D');
    graph.addEdge('C', 'G');
    graph.addEdge('D', 'G');
    graph.addEdge('D', 'H');
    graph.addEdge('B', 'E');
    graph.addEdge('B', 'F');
    graph.addEdge('E', 'I');
  //Print the graph
    console.log(graph.toString());

// Test BFS
  function printNode(value){
    console.log('Visited vertex: ' + value);
  }
  graph.bfs(myVertices[0], printNode);

</script>
</body>
</html>
